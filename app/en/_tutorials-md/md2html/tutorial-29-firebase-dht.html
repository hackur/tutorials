<hr>
<p>tag: tutorial
src: tutorial-29-firebase-dht.html
title: Using Firebase to record temperature and humidity data
banner: tutorial-29-01.jpg
img: tutorial-29-01s.jpg</p>
<h2>date: 20160330</h2>
<!-- @@master  = ../../_layout.html-->
<!-- @@block  =  meta-->
<title>Project Example 29: Using Firebase to record temperature and humidity data :::: Webduino = Web × Arduino</title>

<meta name="description" content="After learning how to use the DHT” sensor to read the temperature and humidity of an environmental, the next step will be to save that information using a database. We will be using Google's Firebase in this tutorial, and with Webduino Blockly we can easily save our temperature and humidity information into a cloud based database system.">

<meta itemprop="description" content="After learning how to use the “DHT” sensor to read the temperature and humidity of an environmental, the next step will be to save that information using a database. We will be using Google's Firebase in this tutorial, and with Webduino Blockly we can easily save our temperature and humidity information into a cloud based database system.">

<meta property="og:description" content="After learning how to use the “DHT” sensor to read the temperature and humidity of an environmental, the next step will be to save that information using a database. We will be using Googles Firebase in this tutorial, and with Webduino Blockly we can easily save our temperature and humidity information into a cloud based database system.">

<meta property="og:title" content="Project Example 29: Using Firebase to record temperature and humidity data" >

<meta property="og:url" content="https://webduino.io/tutorials/tutorial-29-firebase-dht.html">

<meta property="og:image" content="https://webduino.io/img/tutorials/tutorial-29-01s.jpg">

<meta itemprop="image" content="https://webduino.io/img/tutorials/tutorial-29-01s.jpg">

<include src="../_include-tutorials.html"></include>

<!-- @@close-->
<!-- @@block  =  preAndNext-->
<include src="../_include-tutorials-content.html"></include>

<!-- @@close-->
<!-- @@block  =  tutorials-->
<h1>Project Example 29: Using Firebase to record temperature and humidity data</h1>
<p>After learning how to use the &quot;DHT&quot; sensor to read the temperature and humidity of an environmental, the next step will be to save that information using a database. We will be using Google&#39;s Firebase in this tutorial, and with Webduino Blockly we can easily save our temperature and humidity information into a cloud based database system.</p>
<!-- <div class="buy-this">
    <span>溫濕度傳感器：<a href="https://webduino.io/buy/webduino-expansion-s.html" target="_blank">Webduino 擴充套件 S ( 支援馬克 1 號、Fly )</a></span>
    <span>Webduino 開發板：<a href="https://webduino.io/buy/component-webduino-v1.html" target="_blank">Webduino 馬克一號</a>、<a href="https://webduino.io/buy/component-webduino-fly.html" target="_blank">Webduino Fly</a>、<a href="https://webduino.io/buy/component-webduino-uno-fly.html" target="_blank">Webduino Fly + Arduino UNO</a></span>
</div> -->
<h2>Video Tutorial</h2>
<p>Check the video tutorial here: 
<iframe class="youtube" src="https://www.youtube.com/embed/g2vcIGukV6k" frameborder="0" allowfullscreen></iframe></p>
<h2>Wiring and Practice</h2>
<p>The DHT sensor has 4 pins, the first pin starting from the left is V and will be connected to 3.3v, the second pin is Data and will be connected to 10, the third pin has no function, and the fourth one is the GND.</p>
<p><img src="../../img/tutorials/en/tutorial-29-02.jpg" alt=""></p>
<p>We can connect the DHT sensor to the Webduino Mark 1 directly, or use a breadboard and jumper wires.</p>
<p>Webduino Mark 1 Circuit diagram:
<img src="../../img/tutorials/tutorial-29-03.jpg" alt=""></p>
<p>Webduino Fly Circuit diagram:
<img src="../../img/tutorials/tutorial-29-03-fly.jpg" alt=""></p>
<p>Reference image:</p>
<p><img src="../../img/tutorials/tutorial-29-04.jpg" alt=""></p>
<!-- <div class="buy-this">
    <span>溫濕度傳感器：<a href="https://webduino.io/buy/webduino-expansion-s.html" target="_blank">Webduino 擴充套件 S ( 支援馬克 1 號、Fly )</a></span>
    <span>Webduino 開發板：<a href="https://webduino.io/buy/component-webduino-v1.html" target="_blank">Webduino 馬克一號</a>、<a href="https://webduino.io/buy/component-webduino-fly.html" target="_blank">Webduino Fly</a>、<a href="https://webduino.io/buy/component-webduino-uno-fly.html" target="_blank">Webduino Fly + Arduino UNO</a></span>
</div> -->
<h2>註冊 Firebase</h2>
<p>To use Firebase we&#39;ll have to sign up for the service first. To do this go to the Firebase official site: <a href="https://www.firebase.com/">https://www.firebase.com/</a>.</p>
<p><img src="../../img/tutorials/tutorial-29-05.jpg" alt=""></p>
<p>After you&#39;ve signed up with Firebase, you can create your own projects. The projects shown here, are our databases, every database has it&#39;s own web address.</p>
<p><img src="../../img/tutorials/tutorial-29-06.jpg" alt=""></p>
<p>Click on &#39;Manage App&#39; and you can check on your projects and configure the settings. Firebase uses JSON to save its data. If you&#39;re interested in learning more about Firebase, check out their Docs here: <a href="https://www.firebase.com/docs/web/api/">https://www.firebase.com/docs/web/api/</a>. As for our tutorial, all we will need is the database address, and we can continue to record our temperature and humidity data!</p>
<p><img src="../../img/tutorials/tutorial-29-07.jpg" alt=""></p>
<p>First, choose &quot;database&quot; from the left menu.</p>
<p><img src="../../img/tutorials/en/tutorial-29-13.jpg" alt=""></p>
<p>Choose &quot;Rules&quot; and you will see the default setting is &quot;not null&quot;, or in code &quot;!= null&quot;.</p>
<p><img src="../../img/tutorials/en/tutorial-29-14.jpg" alt=""></p>
<p>Set both &quot;read&quot; and &quot;write&quot; to true.</p>
<pre><code>{
    &quot;rules&quot;: {
        &quot;.read&quot;: true,
        &quot;.write&quot;: true
    }
}
</code></pre><p><img src="../../img/tutorials/en/tutorial-29-15.jpg" alt=""></p>
<h2>Instructions for using the Webduino Blockly</h2>
<p>Open the <a href="https://blockly.webduino.io/?lang=en">Webduino Blockly editor</a>, click the &quot;Ｗeb Demo Area&quot; button on the upper right, select &quot;Show Text&quot; from the pull-down menu.</p>
<p><img src="../../img/tutorials/en/tutorial-29-08.jpg" alt=""></p>
<p>Place a &quot;Board&quot; block onto the workspace then enter the name of your Webduino board, place a &quot;DHT&quot; block, from the &quot;Sensors&quot; menu, inside and set the name to dht and pin to 11.</p>
<p><img src="../../img/tutorials/en/tutorial-29-09.jpg" alt=""></p>
<p>Then place a &quot;Firebase&quot; block from &quot;Database&quot; menu and paste the database address from earlier into the url space. Next place a &quot;DHT&quot; block that will detect temperature and humidity set to every 1000 milliseconds (1 second).</p>
<p>Make sure for the &quot;Firebase&quot; block is not placed inside the &quot;DHT detect&quot; block, otherwise the database will be imported every second, which you do not want.</p>
<p><img src="../../img/tutorials/en/tutorial-29-10.jpg" alt=""></p>
<p>Inside the &quot;DHT detect&quot; block, place a &quot;Show&quot; block from the &quot;Show Text&quot; menu then connect a &quot;Create Text With&quot; block from &quot;Text&quot; menu so the temperature and humidity information will be shown on the right hand side. You can add spaces for more blocks to be connected by clicking on the blue gear icon. Fill in the names and place time, temperature, and humidity blocks into the stack.</p>
<p><img src="../../img/tutorials/en/tutorial-29-11.jpg" alt=""></p>
<p>Now that we&#39;ve finished creating the stack to make Firebase record temperature and humidity data, check to see if your board is online (click &quot;<a href="https://webduino.io/device.html">Check Device Status</a>&quot;). When you click on the red execution button &quot;Run Blocks&quot;, go to the Firebase website and you will see information coming in. (Solution: <a href="http://blockly.webduino.io/?lang=en#-KZZUdAMTJpimQ1ZNEh_">http://blockly.webduino.io/?lang=en#-KZZUdAMTJpimQ1ZNEh_</a>)</p>
<p><img src="../../img/tutorials/tutorial-29-12.jpg" alt=""></p>
<h2>Code Explanation (<a href="https://bin.webduino.io/vohen/1/edit?html,css,js,output">Check Webduino Bin</a>, <a href="https://webduino.io/device.html">Check Device Status</a>)</h2>
<p>Include <code>webduino-all.min.js</code> in the header of your html files in order to support all of the Webduino&#39;s components. If the codes are generated by Webduino Blockly, you also have to include <code>webduino-blockly.js</code> in your files.</p>
<pre><code>&lt;script src=&quot;https://webduino.io/components/webduino-js/dist/webduino-all.min.js&quot;&gt;&lt;/script&gt;
&lt;script src=&quot;https://webduinoio.github.io/webduino-blockly/webduino-blockly.js&quot;&gt;&lt;/script&gt;
</code></pre><p>Since we are using Firebase, so we will need to import JaveScript from Firebase. (See &quot;quickstart&quot; from the official page: <a href="https://www.firebase.com/docs/web/quickstart.html">https://www.firebase.com/docs/web/quickstart.html</a> )</p>
<pre><code>&lt;script src=&quot;https://cdn.firebase.com/js/client/2.4.2/firebase.js&quot;&gt;&lt;/script&gt;
</code></pre><p>HTML has a span that shows the temperature and humidity values.</p>
<pre><code>&lt;span id=&quot;demo-area-01-show&quot;&gt;123&lt;/span&gt;
</code></pre><p>The first function inside JavaScript is to get the current time, so when we call it we willhave it. In boardReady, we use the FIRbase API, using push to record our data to the database.    </p>
<pre><code>var dht;
var myFirebase;

function get_time(t) {
  var varTime = new Date(),
    varHours = varTime.getHours(),
    varMinutes = varTime.getMinutes(),
    varSeconds = varTime.getSeconds();
  var varNow;
  if (t == &quot;hms&quot;) {
    varNow = varHours + &quot;:&quot; + varMinutes + &quot;:&quot; + varSeconds;
  } else if (t == &quot;h&quot;) {
    varNow = varHours;
  } else if (t == &quot;m&quot;) {
    varNow = varMinutes;
  } else if (t == &quot;s&quot;) {
    varNow = varSeconds;
  }
  return varNow;
}

boardReady(&#39;&#39;, async function (board) {
  board.samplingInterval = 250;
  dht = getDht(board, 11);
  myFirebase = new Firebase(&quot;https://&lt;YOUR-FIREBASE-APP&gt;.firebaseio.com&quot;);
  dht.read(function(evt){
    document.getElementById(&quot;demo-area-01-show&quot;).innerHTML = ([dht.temperature,&#39; , &#39;,dht.humidity].join(&#39;&#39;));
    myFirebase.push({
      time:get_time(&quot;hms&quot;),
      t:dht.temperature,
      h:dht.humidity
    });
  }, 1000);
});
</code></pre><p>This is how to use Firebase to record temperature and humidity data!<br>Webduino Bin: <a href="https://bin.webduino.io/vohen/1/edit?html,css,js,output">https://bin.webduino.io/vohen/1/edit?html,css,js,output</a><br>Stack setup: <a href="http://blockly.webduino.io/?lang=en#-KZZVRBqhmzK00B0Weci">http://blockly.webduino.io/?lang=en#-KZZVRBqhmzK00B0Weci</a></p>
<!-- <div class="buy-this">
    <span>溫濕度傳感器：<a href="https://webduino.io/buy/webduino-expansion-s.html" target="_blank">Webduino 擴充套件 S ( 支援馬克 1 號、Fly )</a></span>
    <span>Webduino 開發板：<a href="https://webduino.io/buy/component-webduino-v1.html" target="_blank">Webduino 馬克一號</a>、<a href="https://webduino.io/buy/component-webduino-fly.html" target="_blank">Webduino Fly</a>、<a href="https://webduino.io/buy/component-webduino-uno-fly.html" target="_blank">Webduino Fly + Arduino UNO</a></span>
</div> -->
<!-- @@close-->